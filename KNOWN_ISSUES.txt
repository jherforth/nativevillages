====================================================================
KNOWN ISSUES & SOLUTIONS
====================================================================

ISSUE: Floating Dirt/Stone Artifacts
-------------------------------------
SYMPTOM: Random dirt or stone blocks floating in the air above villages

CAUSE: Foundation filling system had bugs that caused it to place
       blocks in mid-air instead of only under buildings

STATUS: ✅ FIXED - Foundation filling completely removed

SOLUTION: Buildings now use placement parameters only:
  - place_offset_y = 0 (ground level)
  - height_max = 1 (perfectly flat terrain only)
  - No automated filling
  - utils.lua completely removed

RESULT: Buildings spawn on flat ground with no gaps and no artifacts


ISSUE: Buildings Still Floating
--------------------------------
SYMPTOM: Buildings appear 1-3 nodes above ground

CAUSE: Old chunks generated with old parameters (place_offset_y = 1)

STATUS: Expected behavior in old chunks

SOLUTION: Generate new world or explore new chunks
          Old chunks cannot be retroactively fixed


ISSUE: Paths Too Sparse
-----------------------
SYMPTOM: Villages have very few paths

CAUSE: Default fill_ratio may be too conservative

STATUS: Working as designed, but configurable

SOLUTION: Edit paths.lua, increase fill_ratio values:
  Line ~58: fill_ratio = 0.003 (from 0.002) for straights
  Line ~60: fill_ratio = 0.0015 (from 0.001) for turns
  Line ~62: fill_ratio = 0.001 (from 0.0005) for junctions


ISSUE: No Paths in Desert/Jungle
---------------------------------
SYMPTOM: Desert and jungle villages have no paths

CAUSE: Path schematics don't exist for these biomes yet

STATUS: Expected - schematics not created

SOLUTION: Create path schematics following naming pattern:
  desert_dirt_forward_straight_5x5.mts
  desert_dirt_sideways_straight_5x5.mts
  desert_dirt_left_5x5.mts
  desert_dirt_right_5x5.mts
  desert_dirt_junction_5x5.mts

  (Same pattern for jungle_dirt_*)


ISSUE: Buildings Missing Nodes
-------------------------------
SYMPTOM: Houses have holes or missing blocks

CAUSE: Terrain overriding schematic (old issue, should be fixed)

STATUS: ✅ FIXED with force_placement flag

SOLUTION: If still occurring, check:
  1. Is this an old chunk? (Generate new world)
  2. Is force_placement in flags? (Should be in all *buildings.lua)
  3. Check debug.log for errors


ISSUE: Villages Too Rare/Common
--------------------------------
SYMPTOM: Can't find villages OR villages everywhere

CAUSE: Noise scale determines spawn frequency

STATUS: Configurable

SOLUTION: Edit village_noise.lua, line 10:
  scale = 0.002  // More villages (from 0.001)
  scale = 0.0005 // Fewer villages (from 0.001)


ISSUE: Buildings Spawning on Hills
-----------------------------------
SYMPTOM: Buildings appear on slopes with visible gaps underneath

CAUSE: height_max was set to 2, checking only center point not footprint

STATUS: ✅ FIXED - Changed height_max to 1 (perfectly flat only)

SOLUTION: All *buildings.lua files now use height_max = 1
          Buildings only spawn on perfectly flat terrain

TRADE-OFF: Buildings are slightly rarer, but always properly grounded

ADJUSTMENT: If you want more buildings and can accept small gaps:
            Change height_max = 2 in *buildings.lua files


ISSUE: Chest Loot Issues
-------------------------
SYMPTOM: Village chests show no items or glitched inventory
        Manually placed chests auto-fill with loot (should be empty)

CAUSE: Loot system was filling ALL chests, including manual placements
       Timing issues with chest initialization during mapgen

STATUS: ✅ FIXED - Loot only fills schematic-placed chests

SOLUTION: loot.lua now checks if chest has a placer (player)
          Only chests placed by schematics (no placer) get filled
          Reduced delay from 1s to 0.1s for faster initialization

RESULT: Village chests have proper loot, manual chests stay empty


====================================================================
REPORTING NEW ISSUES
====================================================================

If you encounter new issues:

1. Check if it's in old chunks (generate new world to test)
2. Check debug.log for error messages
3. Verify file modifications are correct (grep for key values)
4. Note which biome the issue occurs in
5. Include screenshots if visual issue

Common false positives:
- Old chunks will have old behavior (not a bug)
- Missing path schematics means no paths (expected)
- Small gaps under buildings (acceptable trade-off)

====================================================================
